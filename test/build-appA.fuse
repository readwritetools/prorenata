!blue 2.0

template {
	bifurcate 	 bifurcate <source> <dest> --define=RWDOC
	blue 		 node C:/neonave/lib/bluephrase/dbg/main.js compile <source> <dest> --progress
	exim 		 node --use_strict C:/neonave/lib/exim/src/rewrite.js <source> <dest> <rootfile>
	uglify       node C:/Users/Propellerhead/AppData/Roaming/npm/node_modules/uglify-es/bin/uglifyjs <source> --output <dest> --ecma 8 --compress		/* npm install uglify-es -g */
}

// ---------- merge appA proto --> appA fused ---------- 
copy {
	source    appA/proto
	dest      appA/fused
	overwrite older				// older† | always | never
	// onfailure halt			// halt | continue†
	// quiet true				// true | false†
	// mkdir true				// true† | false
}
//
//  ---------- merge appSuite proto --> appA fused ---------- 
copy {
	source    appSuite/proto
	dest      appA/fused
	exclude   appSuite/proto/js		// copy this directory using bifucate
	overwrite older
}
//
//  ---------- conditional compile appSuite code --> appA code ---------- 
recurse {
	source    appSuite/proto/js
	dest      appA/fused/js
	overwrite older
	exec      bifurcate
}
//
//  ---------- process blue-phrase --> html
recurse {
	source    appA/fused/blue
	dest      appA/fused/html
	// output    *.html				// TODO
	exec      blue
	overwrite older
}
//
//  ---------- transpile import/export code --> require/module ---------- 
exim {
	source    appA/fused/js
	dest      appA/fused/dbg
	rootfile  test.exim
}
//
//  ---------- remove comments and whitespace ---------- 
recurse {
	source    appA/fused/dbg
	dest      appA/fused/dst
	overwrite older
	exec      uglify
}

